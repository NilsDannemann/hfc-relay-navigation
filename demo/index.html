<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>HFC Relay - Navigation Demo</title>
	<link rel="stylesheet" href="demo.css">
</head>
<body>

	<h1 class="demo-title">HFC Relay - Navigation</h1>
	<p class="demo-subtitle">Priority - Multi Level Drawer<br><br><br></p>
	<a href="https://www.regionalaustraliabank.com.au/" target="_blank" style="margin: auto;">Good Example</a>
	
	<nav class="app-nav">
        <ul>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li class="has-submenu"><a href="#">menu item</a>
            	<ul>
					<li><a href="#">menu item</a></li>
					<li><a href="#">menu item</a></li>
					<li class="has-submenu"><a href="#">menu item</a>
						<ul>
							<li><a href="#">menu item</a></li>
							<li class="has-submenu"><a href="#">menu item</a>
								<ul>
									<li><a href="#">menu item</a></li>
									<li><a href="#">menu item</a></li>
									<li><a href="#">menu item</a></li>
								</ul>
							</li>
							<li><a href="#">menu item</a></li>
						</ul>
					</li>
            	</ul>
            </li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
            <li><a href="#">menu item</a></li>
        </ul>
    </nav>
	
	<!--[if lte IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	

	<!-- Priority NAV -->
		<!-- <script src="../js/jquery.js"></script> -->
		<script src="../js/priority-nav.js"></script>
		<script>
		    var nav = priorityNav.init({
		        initClass:                  "js-priorityNav", // Class that will be printed on html element to allow conditional css styling.
		        mainNavWrapper:             ".app-nav", // mainnav wrapper selector (must be direct parent from mainNav)
		        mainNav:                    ".app-nav ul", // mainnav selector. (must be inline-block)
		        navDropdownClassName:       "app-nav__dropdown", // class used for the dropdown - this is a class name, not a selector.
		        navDropdownToggleClassName: "app-nav__dropdown-toggle", // class used for the dropdown toggle - this is a class name, not a selector.
		        navDropdownLabel:           "Mehr", // Text that is used for the dropdown toggle.
		        navDropdownBreakpointLabel: "Menu", //button label for navDropdownToggle when the breakPoint is reached.
		        breakPoint:                 650, //amount of pixels when all menu items should be moved to dropdown to simulate a mobile menu
		        throttleDelay:              50, // this will throttle the calculating logic on resize because i'm a responsible dev.
		        offsetPixels:               0, // increase to decrease the time it takes to move an item.
		        count:                      true, // prints the amount of items are moved to the attribute data-count to style with css counter.

		        //Callbacks
		        moved: function () {}, // executed when item is moved to dropdown
		        movedBack: function () {} // executed when item is moved back to main menu
		    });
		</script>
	<!-- Priority NAV -->
		
		<script>
			(function() {

				/**
				 * Toggle class on element
				 * @param el
				 * @param className
				 */
				var toggleClass = function (el, className) {
					if (el.classList) {
						el.classList.toggle(className);
					} else {
				        var classes = el.className.split(" ");
				        var existingIndex = classes.indexOf(className);

				        if (existingIndex >= 0)
				            classes.splice(existingIndex, 1); else
				            classes.push(className);

				        el.className = classes.join(" ");
				    }
				};
				/**
				 * Get the closest matching element up the DOM tree
				 * @param {Element} elem Starting element
				 * @param {String} selector Selector to match against (class, ID, or data attribute)
				 * @return {Boolean|Element} Returns false if not match found
				 */
				var getClosest = function (elem, selector) {
				    var firstChar = selector.charAt(0);
				    for (; elem && elem !== document; elem = elem.parentNode) {
				        if (firstChar === ".") {
				            if (elem.classList.contains(selector.substr(1))) {
				                return elem;
				            }
				        } else if (firstChar === "#") {
				            if (elem.id === selector.substr(1)) {
				                return elem;
				            }
				        } else if (firstChar === "[") {
				            if (elem.hasAttribute(selector.substr(1, selector.length - 2))) {
				                return elem;
				            }
				        }
				    }
				    return false;
				};

				/*
				 * Toggle dropdown
				 */
				var submenu = document.querySelectorAll('.has-submenu');
				Array.from(submenu).forEach(item => {
				    item.addEventListener('click', function(event) {
				        toggleClass(this, "is-open");
				        toggleClass(this.querySelector("ul"), "show");
				    });
				});
				
				/*
				 * Remove when clicked outside dropdown
				 */
				document.addEventListener("click", function (event) {
				    if (!getClosest(event.target, ".has-submenu") && event.target !== this.querySelector(".has-submenu")) {
				    	Array.from(submenu).forEach(item => {
				    	    item.classList.remove("is-open");
				    	    item.querySelector("ul").classList.remove("show");
				    	});
				    }
				});
			})();
		</script>

</body>
</html>